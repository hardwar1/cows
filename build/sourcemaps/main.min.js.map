{"version":3,"sources":["01__main.js"],"names":["document","addEventListener","event","qOne","selector","querySelector","qAll","querySelectorAll","clAdd","coll","nameClass","i","length","classList","add","enterNum","cows","bulls","jsStartNew","concoctNumber","hideNum","counterShow","screenWidth","window","screen","width","jsRule","jsLose","cowsBoard","cowsHelp","conceiveBtn","popapConcoct","handMadeHideBtn","overlay","jsShow","answerPanelLeft","answerPanelRight","controlBtns","hideNumText","rule","btn","numInput","textContent","value","getNumber","substring","startGame","removeAttribute","innerHTML","children","removeChild","lastChild","setAttribute","randomNum","Math","floor","random","includes","console","log","hideNumber","loseGame","why","scrollDown","startsBtns","show","item","remove","hide","scrollTop","scrollHeight","numberSet","Set","size","num1","num2","indexOf","write","panel","rowsNumber","currentPanel","Number","writeResult","winGame","contains","e","key","concoctNum","concoctNumSet","cowsBg","checkImg","Image","randomImg","setInterval","c","src","onload","style","backgroundImage","chengeImg","burger","mobileMenu","this","toggle"],"mappings":"AAAA,aAEAA,SAASC,iBAAiB,oBAAoB,SAAUC,GAGtD,SAASC,EAAKC,GACZ,OAAOJ,SAASK,cAAcD,GAGhC,SAASE,EAAKF,GACZ,OAAOJ,SAASO,iBAAiBH,GAGnC,SAASI,EAAMC,EAAMC,GACnB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BF,EAAKE,GAAGE,UAAUC,IAAIJ,GAmC1B,GAAIP,EAAK,SAAU,CACjB,IAEEY,EACAC,EACAC,EACAC,EAEAC,EANAC,EAAU,GAKVC,EAAc,EAGhB,MACEC,EAAcC,OAAOC,OAAOC,MAC5BC,EAASvB,EAAK,YACdwB,EAASxB,EAAK,YACdyB,EAAYzB,EAAK,sBACjB0B,EAAW1B,EAAK,YAChB2B,EAAc3B,EAAK,gBACnB4B,EAAe5B,EAAK,eACpB6B,EAAkB7B,EAAK,mBACvB8B,EAAU9B,EAAK,YACf+B,EAAS5B,EAAK,YACd6B,EAAkBhC,EAAK,6BACvBiC,EAAmBjC,EAAK,8BACxBkC,EAAc/B,EAAK,cACnBgC,EAAcnC,EAAK,mBACnBoC,EAAOpC,EAAK,UAGd,IAAK,IAAIqC,KAAOH,EACdG,EAAIvC,iBAAiB,SAAS,WAE5B,IAAIwC,EAAWD,EAAIE,YAEH,SAAZD,GACF1B,EAAWa,EAAUe,MACrBC,KAEAhB,EAAUe,MADW,UAAZF,EACSb,EAAUe,MAAME,UAAU,EAAGjB,EAAUe,MAAM/B,OAAS,GAEtDgB,EAAUe,MAAQF,KAS1C,SAASK,IAEP,IAAK,IAAIN,KAAOH,EACdG,EAAIO,gBAAgB,YAItB,IAFAT,EAAYU,UAAY,OACxBrB,EAAOoB,gBAAgB,YAChBZ,EAAgBc,SAASrC,OAAS,GACvCuB,EAAgBe,YAAYf,EAAgBgB,WAE9C,KAAOf,EAAiBa,SAASrC,OAAS,GACxCwB,EAAiBc,YAAYd,EAAiBe,WAEhDrB,EAAYsB,aAAa,YAAY,GACf,GAAlBhC,EAAQR,QAqKd,WACE,KAAOQ,EAAQR,OAAS,GAAG,CACzB,IAAIyC,EAAYC,KAAKC,MAAsB,GAAhBD,KAAKE,UAC3BpC,EAAQqC,SAASJ,KACpBjC,GAAWiC,GAGfK,QAAQC,IAAIvC,GA3KVwC,GAyBJ,SAASC,EAASC,EAAM,kBACtBxB,EAAYU,UAAY5B,EAExBgB,EAAiBY,UAAYZ,EAAiBY,UAAY,4CACvBc,wFAEnCC,IACA5B,EAAgBa,UAAYb,EAAgBa,UAAY,4CACrBc,wFAEnCC,IACAC,IAEA5C,EAAU,GACV,IAAK,IAAIoB,KAAOH,EACdG,EAAIY,aAAa,YAAY,GAG/BtB,EAAYiB,gBAAgB,YAE5BpB,EAAOyB,aAAa,YAAY,GAGlC,SAASY,IACP9C,EAAaZ,EAAK,iBAClB,IAAK,IAAIkC,KAAOtB,EACdsB,EAAIvC,iBAAiB,QAAS6C,GAIlC,SAASmB,EAAKC,GACZ7C,IACA6C,EAAKrD,UAAUsD,OAAO,cACtBlC,EAAQpB,UAAUsD,OAAO,cAG3B,SAASC,EAAKF,GACZA,EAAKrD,UAAUC,IAAI,cACnBO,IACKA,GACHY,EAAQpB,UAAUC,IAAI,cAI1B,SAASiD,IACP5B,EAAgBkC,UAAYlC,EAAgBmC,aAC5ClC,EAAiBiC,UAAYjC,EAAiBkC,aAmChD,SAAS1B,IACP,IAAI2B,EAAY,IAAIC,IAAIzD,GAExB,GAAuB,GAAnBA,EAASH,QAAkC,IAAnB2D,EAAUE,KACpC,GAAI1D,GAAYK,EAAS,CACvB,IAAIsD,EAAO,EACTC,EAAO,EAIT,IAHA3D,EAAO,EACPC,EAAQ,EAEDyD,EAAO,GACR3D,EAAS2D,IAAStD,EAAQsD,IAC5BzD,GAAS,EACTyD,MAC6C,GAApCtD,EAAQwD,QAAQ7D,EAAS2D,KAClC1D,GAAQ,EACR0D,MAEAC,IACY,GAARA,IACFA,EAAO,EACPD,OApDZ,WACE,SAASG,EAAMC,GACbA,EAAM9B,UAAY8B,EAAM9B,UAAY,oGAEWjC,oEACEE,mEACDD,uCAGhD+C,IAGF,IAAIgB,EAAazE,EAAK,qBAClB0E,EAAe7C,EACf4C,EAAWnE,OAAS,GACtBiE,EAAM1C,GACG4C,EAAWnE,OAAS,IAAMqE,OAAO3D,GAAe,KACzDc,EAAiBvB,UAAUsD,OAAO,cAClCU,EAAMzC,GACN4C,EAAe5C,IAEfyB,EAAS,wBACTE,KAkCEmB,QA/HN,WACE5C,EAAYU,UAAY,0BAA4BjC,EAAW,aAE/DqB,EAAiBY,UAAYZ,EAAiBY,UAAY,4IAG1De,IACA3C,EAAU,GACVe,EAAgBa,UAAYb,EAAgBa,UAAY,4IAGxDe,IACAC,IAEA,IAAK,IAAIxB,KAAOH,EACdG,EAAIY,aAAa,YAAY,GAE/BzB,EAAOyB,aAAa,YAAY,GAChCtB,EAAYiB,gBAAgB,YAgHxBoC,QAGFlB,EAAKpC,GA3JG1B,EAAK,aACXF,iBAAiB,QAAS6C,GAsHhCnB,EAAO1B,iBAAiB,SAAS,WAC/B4D,OAuCF5B,EAAQhC,iBAAiB,SAAS,WAChCmE,EAAKnC,GACLzB,EAAM0B,EAAQ,iBAGhBR,EAAOzB,iBAAiB,SAAS,WAC/BsC,EAAK1B,UAAUuE,SAAS,cAAgBnB,EAAK1B,GAAQ6B,EAAK7B,MAI5DvC,SAASC,iBAAiB,WAAW,SAAUoF,GAE7CtE,EAAWa,EAAUe,MAER,SAAT0C,EAAEC,KAA2C,QAAzBhD,EAAYU,WAClCJ,IAEW,UAATyC,EAAEC,KACJ9E,EAAM0B,EAAQ,iBAgBlBJ,EAAY7B,iBAAiB,SAAS,WACpC8B,EAAalB,UAAUuE,SAAS,cAAgBnB,EAAKlC,GAAgBqC,EAAKrC,MAG5EC,EAAgB/B,iBAAiB,SAAS,WACxCkB,EAAgBhB,EAAK,yBACrB,IAAIoF,EAAapE,EAAcwB,MAC3B6C,EAAgB,IAAIhB,IAAIe,GAEH,GAArBA,EAAW3E,QAAqC,GAAtB4E,EAAcf,MAAaQ,OAAOM,GAAc,IAC5EnE,EAAUmE,EACVA,EAAa,GACbpE,EAAciC,aAAa,YAAY,GACvCM,QAAQC,IAAIvC,GACZ0B,IACAsB,EAAKrC,OAKT,MAAM0D,EAAStF,EAAK,SAClBuF,EAAW,IAAIC,MACjB,IAAIC,EAEJC,YAAY,MAIZ,WACE,IAAIlF,EAAI,EACNmF,EAAI,EACN,KAAOnF,EAAI,GAAKmF,EAAI,IAClBF,EAWKtC,KAAKC,MAAsB,GAAhBD,KAAKE,UAVrBkC,EAASK,IAAM,eAAeH,QAC9BF,EAASM,OAAS,WAChBP,EAAOQ,MAAMC,gBAAkB,mBAAmBN,SAClDjF,KAEFmF,IAbFK,IACC,KAqBH,IAAIC,EAASjG,EAAK,WAClBkG,EAAalG,EAAK,iBAElBiG,EAAOnG,iBAAiB,SAAS,WAC/BqG,KAAKzF,UAAU0F,OAAO,iBACtBF,EAAWxF,UAAU0F,OAAO,yBAG9BF,EAAWpG,iBAAiB,SAAS,WACnCqG,KAAKzF,UAAUsD,OAAO","file":"../js/main.min.js","sourcesContent":["\"use strict\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\r\n\r\n  // мой мини jquery \r\n  function qOne(selector) {\r\n    return document.querySelector(selector);\r\n  }\r\n\r\n  function qAll(selector) {\r\n    return document.querySelectorAll(selector);\r\n  }\r\n\r\n  function clAdd(coll, nameClass) {\r\n    for (let i = 0; i < coll.length; i++) {\r\n      coll[i].classList.add(nameClass);\r\n    }\r\n  }\r\n\r\n  function clRem(coll, nameClass) {\r\n    for (let i = 0; i < coll.length; i++) {\r\n      coll[i].classList.remove(nameClass);\r\n    }\r\n  }\r\n\r\n  function clTog(coll, nameClass) {\r\n    for (let i = 0; i < coll.length; i++) {\r\n      coll[i].classList.toggle(nameClass);\r\n    }\r\n  }\r\n\r\n  // /мой мини jquery\r\n\r\n\r\n\r\n  //Быки и коровы\r\n  // основные задачи:\r\n  // финальные тесты\r\n\r\n  // возможные дополнения:\r\n\r\n  // можно сделать количество ходов  \r\n  // и если за это количество не справилсся то сделать проигрышь\r\n  // сделать топовое количество ходов\r\n\r\n  // выводить текущее время/погоду/местоположение\r\n  // количество лайков в зависимости от скорости 5 \t&#128077;\r\n  // секундомер текущий\r\n  // и сохранять топ результат по времени и прошлый\r\n\r\n  if (qOne('.cows')) {\r\n    let\r\n      hideNum = '',\r\n      enterNum,\r\n      cows,\r\n      bulls,\r\n      jsStartNew,\r\n      counterShow = 0,\r\n      concoctNumber;\r\n\r\n    const\r\n      screenWidth = window.screen.width,\r\n      jsRule = qOne('.js-rule'),\r\n      jsLose = qOne('.js-lose'),\r\n      cowsBoard = qOne('.cows__board--main'),\r\n      cowsHelp = qOne('.js-help'),\r\n      conceiveBtn = qOne('.js-conceive'),\r\n      popapConcoct = qOne('.js-concoct'),\r\n      handMadeHideBtn = qOne('.cows__hide-btn'),\r\n      overlay = qOne('.overlay'),\r\n      jsShow = qAll('.js-show'),\r\n      answerPanelLeft = qOne('.cows__answer-panel--left'),\r\n      answerPanelRight = qOne('.cows__answer-panel--right'),\r\n      controlBtns = qAll('.cows__btn'),\r\n      hideNumText = qOne('.cows__hide-num'),\r\n      rule = qOne('.modal');\r\n\r\n    //функционал контрольной панели (кнопок 1-9 и т.д.)\r\n    for (let btn of controlBtns) {\r\n      btn.addEventListener('click', function () {\r\n\r\n        let numInput = btn.textContent;\r\n        // console.log('ввел ' + numInput);\r\n        if (numInput == 'Enter') {\r\n          enterNum = cowsBoard.value;\r\n          getNumber();\r\n        } else if (numInput == 'Bspace') {\r\n          cowsBoard.value = cowsBoard.value.substring(0, cowsBoard.value.length - 1);\r\n        } else {\r\n          cowsBoard.value = cowsBoard.value + numInput;\r\n        }\r\n      });\r\n    }\r\n\r\n    //старт игры / проигрышь / выигрышь\r\n    let start = qOne('.js-start');\r\n    start.addEventListener('click', startGame);\r\n\r\n    function startGame() {\r\n\r\n      for (let btn of controlBtns) {\r\n        btn.removeAttribute('disabled');\r\n      }\r\n      hideNumText.innerHTML = 'XXXX';\r\n      jsLose.removeAttribute('disabled');\r\n      while (answerPanelLeft.children.length > 1) {\r\n        answerPanelLeft.removeChild(answerPanelLeft.lastChild);\r\n      }\r\n      while (answerPanelRight.children.length > 1) {\r\n        answerPanelRight.removeChild(answerPanelRight.lastChild);\r\n      }\r\n      conceiveBtn.setAttribute('disabled', true);\r\n      if (hideNum.length != 4) {\r\n        hideNumber();\r\n      }\r\n    }\r\n\r\n    function winGame() {\r\n      hideNumText.innerHTML = `<span>&#128077;</span> ` + enterNum + ` &#128077;`;\r\n\r\n      answerPanelRight.innerHTML = answerPanelRight.innerHTML + `\r\n      <div class=\"cows__text--win\">Число отгадано!!</div>\r\n      <button type=\"button\" class=\"cow-btn js-start-new\">Новая игра</button>`;\r\n      scrollDown();\r\n      hideNum = '';\r\n      answerPanelLeft.innerHTML = answerPanelLeft.innerHTML + `\r\n      <div class=\"cows__text--win\">Число отгадано!!</div>\r\n      <button type=\"button\" class=\"cow-btn js-start-new\">Новая игра</button>`;\r\n      scrollDown();\r\n      startsBtns();\r\n\r\n      for (let btn of controlBtns) {\r\n        btn.setAttribute('disabled', true);\r\n      }\r\n      jsLose.setAttribute('disabled', true);\r\n      conceiveBtn.removeAttribute('disabled');\r\n    }\r\n\r\n    function loseGame(why = '(игрок сдался)') {\r\n      hideNumText.innerHTML = hideNum;\r\n\r\n      answerPanelRight.innerHTML = answerPanelRight.innerHTML + `\r\n      <div class=\"lose\">игра закончена ${why}</div>\r\n      <button type=\"button\" class=\"cow-btn js-start-new\">Новая игра</button>`;\r\n      scrollDown();\r\n      answerPanelLeft.innerHTML = answerPanelLeft.innerHTML + `\r\n      <div class=\"lose\">игра закончена ${why}</div>\r\n      <button type=\"button\" class=\"cow-btn js-start-new\">Новая игра</button>`;\r\n      scrollDown();\r\n      startsBtns();\r\n\r\n      hideNum = '';\r\n      for (let btn of controlBtns) {\r\n        btn.setAttribute('disabled', true);\r\n      }\r\n\r\n      conceiveBtn.removeAttribute('disabled');\r\n\r\n      jsLose.setAttribute('disabled', true);\r\n    }\r\n\r\n    function startsBtns() {\r\n      jsStartNew = qAll('.js-start-new');\r\n      for (let btn of jsStartNew) {\r\n        btn.addEventListener('click', startGame);\r\n      }\r\n    }\r\n\r\n    function show(item) {\r\n      counterShow++;\r\n      item.classList.remove('hide-block');\r\n      overlay.classList.remove('hide-block');\r\n    }\r\n\r\n    function hide(item) {\r\n      item.classList.add('hide-block');\r\n      counterShow--\r\n      if (!counterShow) {\r\n        overlay.classList.add('hide-block');\r\n      }\r\n    }\r\n\r\n    function scrollDown() {\r\n      answerPanelLeft.scrollTop = answerPanelLeft.scrollHeight;\r\n      answerPanelRight.scrollTop = answerPanelRight.scrollHeight;\r\n    }\r\n\r\n    // вывод ответа в таблицу\r\n    function writeResult() {\r\n      function write(panel) {\r\n        panel.innerHTML = panel.innerHTML + `\r\n          <div class=\"cows__answer-row\">\r\n            <span class=\"cows__text cows__text--num\">${enterNum}</span>\r\n            <span class=\"cows__text cows__text--bulls\">${bulls}</span>\r\n            <span class=\"cows__text cows__text--cows\">${cows}</span>\r\n          </div>\r\n        `;\r\n        scrollDown();\r\n      }\r\n\r\n      let rowsNumber = qAll('.cows__answer-row');\r\n      let currentPanel = answerPanelLeft;\r\n      if (rowsNumber.length < 17) {\r\n        write(answerPanelLeft);\r\n      } else if (rowsNumber.length < 35 && Number(screenWidth) > 800) {\r\n        answerPanelRight.classList.remove('hide-block');\r\n        write(answerPanelRight);\r\n        currentPanel = answerPanelRight;\r\n      } else {\r\n        loseGame('(превышено 35 ходов)');\r\n        scrollDown();\r\n      }\r\n    }\r\n\r\n    jsLose.addEventListener('click', function () {\r\n      loseGame();\r\n    });\r\n\r\n    // обработка введенного игроком числа\r\n    function getNumber() {\r\n      let numberSet = new Set(enterNum);\r\n\r\n      if (enterNum.length == 4 && numberSet.size === 4) {\r\n        if (enterNum != hideNum) {\r\n          let num1 = 0,\r\n            num2 = 0;\r\n          cows = 0;\r\n          bulls = 0;\r\n\r\n          while (num1 < 4) {\r\n            if (enterNum[num1] == hideNum[num1]) {\r\n              bulls += 1;\r\n              num1++;\r\n            } else if (hideNum.indexOf(enterNum[num1]) != -1) {\r\n              cows += 1;\r\n              num1++;\r\n            } else {\r\n              num2++;\r\n              if (num2 == 4) {\r\n                num2 = 0;\r\n                num1++;\r\n              }\r\n            }\r\n          }\r\n          writeResult();\r\n\r\n        } else {\r\n          winGame()\r\n        }\r\n      } else {\r\n        show(cowsHelp);\r\n      }\r\n    }\r\n\r\n    overlay.addEventListener('click', function () {\r\n      hide(overlay);\r\n      clAdd(jsShow, 'hide-block');\r\n    });\r\n\r\n    jsRule.addEventListener('click', function () {\r\n      rule.classList.contains('hide-block') ? show(rule) : hide(rule);\r\n    });\r\n\r\n    //слежка за нажатием клавиш\r\n    document.addEventListener('keydown', function (e) {\r\n      // console.log(e);\r\n      enterNum = cowsBoard.value;\r\n\r\n      if (e.key == 'Enter' && hideNumText.innerHTML == 'XXXX') {\r\n        getNumber();\r\n      }\r\n      if (e.key == 'Escape') {\r\n        clAdd(jsShow, 'hide-block');\r\n      }\r\n    });\r\n\r\n    // компьютер загадывает число:\r\n    function hideNumber() {\r\n      while (hideNum.length < 4) {\r\n        let randomNum = Math.floor(Math.random() * 10);\r\n        if (!hideNum.includes(randomNum)) {\r\n          hideNum += randomNum;\r\n        }\r\n      }\r\n      console.log(hideNum);\r\n    }\r\n\r\n    // попап с ручным загадыванием числа\r\n    conceiveBtn.addEventListener('click', function () {\r\n      popapConcoct.classList.contains('hide-block') ? show(popapConcoct) : hide(popapConcoct);\r\n    });\r\n\r\n    handMadeHideBtn.addEventListener('click', function () {\r\n      concoctNumber = qOne('.cows__board--concoct');\r\n      let concoctNum = concoctNumber.value;\r\n      let concoctNumSet = new Set(concoctNum);\r\n\r\n      if (concoctNum.length == 4 && concoctNumSet.size == 4 && Number(concoctNum) > 4) {\r\n        hideNum = concoctNum;\r\n        concoctNum = '';\r\n        concoctNumber.setAttribute('disabled', true);\r\n        console.log(hideNum);\r\n        startGame();\r\n        hide(popapConcoct);\r\n      }\r\n    });\r\n\r\n    // слайдер\r\n    const cowsBg = qOne('.cows'),\r\n      checkImg = new Image();\r\n    let randomImg;\r\n\r\n    setInterval(() => {\r\n      chengeImg();\r\n    }, 10000);\r\n\r\n    function chengeImg() {\r\n      let i = 0,\r\n        c = 0;\r\n      while (i < 1 && c < 10) {\r\n        randomImg = randomI();\r\n        checkImg.src = `images/cows/${randomImg}.jpg`;\r\n        checkImg.onload = function () {\r\n          cowsBg.style.backgroundImage = `url(images/cows/${randomImg}.jpg)`;\r\n          i++;\r\n        }\r\n        c++;\r\n      }\r\n    }\r\n\r\n    function randomI() {\r\n      return Math.floor(Math.random() * 10);\r\n    }\r\n\r\n    // кнопка вызова мобильного меню\r\n    let burger = qOne('.burger'),\r\n    mobileMenu = qOne('.header__menu');\r\n\r\n    burger.addEventListener('click', function () {\r\n      this.classList.toggle('burger--close');\r\n      mobileMenu.classList.toggle('header__menu--show');\r\n    });\r\n\r\n    mobileMenu.addEventListener('click', function () {\r\n      this.classList.remove('header__menu--show');\r\n    });\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n});"]}