{"version":3,"sources":["01__main.js"],"names":["document","addEventListener","event","qOne","selector","querySelector","qAll","querySelectorAll","clAdd","coll","nameClass","i","length","classList","add","enterNum","cows","bulls","jsStartNew","concoctNumber","hideNum","counterShow","moveCounter","screenWidth","window","screen","width","jsRule","jsLose","cowsBoard","cowsHelp","conceiveBtn","popapConcoct","handMadeHideBtn","overlay","jsShow","answerPanelLeft","answerPanelRight","controlBtns","hideNumText","rule","btn","numInput","textContent","value","getNumber","substring","startGame","removeAttribute","innerHTML","children","removeChild","lastChild","setAttribute","randomNum","Math","floor","random","includes","console","log","hideNumber","loseGame","why","scrollDown","startsBtns","show","item","remove","hide","scrollTop","scrollHeight","numberSet","Set","size","num1","num2","indexOf","write","panel","rowsNumber","currentPanel","Number","writeResult","winGame","contains","e","key","concoctNum","concoctNumSet","cowsBg","checkImg","Image","randomImg","setInterval","c","src","onload","style","backgroundImage","chengeImg","burger","mobileMenu","this","toggle"],"mappings":"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","file":"../js/main.min.js","sourcesContent":["\"use strict\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\r\n\r\n  // мой мини jquery \r\n  function qOne(selector) {\r\n    return document.querySelector(selector);\r\n  }\r\n\r\n  function qAll(selector) {\r\n    return document.querySelectorAll(selector);\r\n  }\r\n\r\n  function clAdd(coll, nameClass) {\r\n    for (let i = 0; i < coll.length; i++) {\r\n      coll[i].classList.add(nameClass);\r\n    }\r\n  }\r\n\r\n  function clRem(coll, nameClass) {\r\n    for (let i = 0; i < coll.length; i++) {\r\n      coll[i].classList.remove(nameClass);\r\n    }\r\n  }\r\n\r\n  function clTog(coll, nameClass) {\r\n    for (let i = 0; i < coll.length; i++) {\r\n      coll[i].classList.toggle(nameClass);\r\n    }\r\n  }\r\n\r\n  // /мой мини jquery\r\n\r\n  //Быки и коровы\r\n  // основные задачи:\r\n\r\n  // финальные тесты\r\n\r\n  // возможные дополнения:\r\n  // сделать опционально высокую сложность\r\n  // автоввод \r\n  // ограничить количество ввода цифр в инпут\r\n\r\n  // выводить текущее время/погоду/местоположение\r\n  \r\n  // секундомер текущий\r\n  // количество лайков в зависимости от скорости 5 \t&#128077;\r\n  // и сохранять топ результат по времени и прошлый\r\n\r\n  if (qOne('.cows')) {\r\n    let\r\n      hideNum = '',\r\n      enterNum,\r\n      cows,\r\n      bulls,\r\n      jsStartNew,\r\n      counterShow = 0,\r\n      moveCounter = 0,\r\n      concoctNumber;\r\n\r\n    const\r\n      screenWidth = window.screen.width,\r\n      jsRule = qOne('.js-rule'),\r\n      jsLose = qOne('.js-lose'),\r\n      cowsBoard = qOne('.cows__board--main'),\r\n      cowsHelp = qOne('.js-help'),\r\n      conceiveBtn = qOne('.js-conceive'),\r\n      popapConcoct = qOne('.js-concoct'),\r\n      handMadeHideBtn = qOne('.cows__hide-btn'),\r\n      overlay = qOne('.overlay'),\r\n      jsShow = qAll('.js-show'),\r\n      answerPanelLeft = qOne('.cows__answer-panel--left'),\r\n      answerPanelRight = qOne('.cows__answer-panel--right'),\r\n      controlBtns = qAll('.cows__btn'),\r\n      hideNumText = qOne('.cows__hide-num'),\r\n      rule = qOne('.modal');\r\n\r\n    //функционал контрольной панели (кнопок 1-9 и т.д.)\r\n    for (let btn of controlBtns) {\r\n      btn.addEventListener('click', function () {\r\n\r\n        let numInput = btn.textContent;\r\n        // console.log('ввел ' + numInput);\r\n        if (numInput == 'Enter') {\r\n          enterNum = cowsBoard.value;\r\n          getNumber();\r\n        } else if (numInput == 'Bspace') {\r\n          cowsBoard.value = cowsBoard.value.substring(0, cowsBoard.value.length - 1);\r\n        } else {\r\n          cowsBoard.value = cowsBoard.value + numInput;\r\n        }\r\n      });\r\n    }\r\n\r\n    //старт игры / проигрышь / выигрышь\r\n    let start = qOne('.js-start');\r\n    start.addEventListener('click', startGame);\r\n\r\n    function startGame() {\r\n\r\n      for (let btn of controlBtns) {\r\n        btn.removeAttribute('disabled');\r\n      }\r\n      hideNumText.innerHTML = 'XXXX';\r\n      jsLose.removeAttribute('disabled');\r\n      while (answerPanelLeft.children.length > 1) {\r\n        answerPanelLeft.removeChild(answerPanelLeft.lastChild);\r\n      }\r\n      while (answerPanelRight.children.length > 1) {\r\n        answerPanelRight.removeChild(answerPanelRight.lastChild);\r\n      }\r\n      conceiveBtn.setAttribute('disabled', true);\r\n      if (hideNum.length != 4) {\r\n        hideNumber();\r\n      }\r\n\r\n      moveCounter = 0;\r\n    }\r\n\r\n    function winGame() {\r\n      hideNumText.innerHTML = `<span>&#128077;</span> ` + enterNum + ` &#128077;`;\r\n\r\n      answerPanelRight.innerHTML = answerPanelRight.innerHTML + `\r\n      <div class=\"cows__text--win\">Число отгадано!!</div>\r\n      <div class=\"cows__text--win\">потрачено ходов: ${moveCounter}</div>\r\n      <button type=\"button\" class=\"cow-btn js-start-new\">Новая игра</button>`;\r\n      scrollDown();\r\n      hideNum = '';\r\n      answerPanelLeft.innerHTML = answerPanelLeft.innerHTML + `\r\n      <div class=\"cows__text--win\">Число отгадано!!</div>\r\n      <div class=\"cows__text--win\">потрачено ходов: ${moveCounter}</div>\r\n\r\n      <button type=\"button\" class=\"cow-btn js-start-new\">Новая игра</button>`;\r\n      scrollDown();\r\n      startsBtns();\r\n\r\n      for (let btn of controlBtns) {\r\n        btn.setAttribute('disabled', true);\r\n      }\r\n      jsLose.setAttribute('disabled', true);\r\n      conceiveBtn.removeAttribute('disabled');\r\n      moveCounter = 0;\r\n    }\r\n\r\n    function loseGame(why = '(игрок сдался)') {\r\n      hideNumText.innerHTML = hideNum;\r\n\r\n      answerPanelRight.innerHTML = answerPanelRight.innerHTML + `\r\n      <div class=\"lose\">игра закончена ${why}</div>\r\n      <button type=\"button\" class=\"cow-btn js-start-new\">Новая игра</button>`;\r\n      scrollDown();\r\n      answerPanelLeft.innerHTML = answerPanelLeft.innerHTML + `\r\n      <div class=\"lose\">игра закончена ${why}</div>\r\n      <button type=\"button\" class=\"cow-btn js-start-new\">Новая игра</button>`;\r\n      scrollDown();\r\n      startsBtns();\r\n\r\n      hideNum = '';\r\n      for (let btn of controlBtns) {\r\n        btn.setAttribute('disabled', true);\r\n      }\r\n\r\n      conceiveBtn.removeAttribute('disabled');\r\n\r\n      jsLose.setAttribute('disabled', true);\r\n      moveCounter = 0;\r\n    }\r\n\r\n    function startsBtns() {\r\n      jsStartNew = qAll('.js-start-new');\r\n      for (let btn of jsStartNew) {\r\n        btn.addEventListener('click', startGame);\r\n      }\r\n    }\r\n\r\n    function show(item) {\r\n      counterShow++;\r\n      item.classList.remove('hide-block');\r\n      overlay.classList.remove('hide-block');\r\n    }\r\n\r\n    function hide(item) {\r\n      item.classList.add('hide-block');\r\n      counterShow--\r\n      if (!counterShow) {\r\n        overlay.classList.add('hide-block');\r\n      }\r\n    }\r\n\r\n    function scrollDown() {\r\n      answerPanelLeft.scrollTop = answerPanelLeft.scrollHeight;\r\n      answerPanelRight.scrollTop = answerPanelRight.scrollHeight;\r\n    }\r\n\r\n    // вывод ответа в таблицу\r\n    function writeResult() {\r\n      function write(panel) {\r\n        panel.innerHTML = panel.innerHTML + `\r\n          <div class=\"cows__answer-row\">\r\n            <span class=\"cows__text cows__text--num\">${enterNum}</span>\r\n            <span class=\"cows__text cows__text--bulls\">${bulls}</span>\r\n            <span class=\"cows__text cows__text--cows\">${cows}</span>\r\n          </div>\r\n        `;\r\n        scrollDown();\r\n        moveCounter++;\r\n      }\r\n\r\n      let rowsNumber = qAll('.cows__answer-row');\r\n      let currentPanel = answerPanelLeft;\r\n      if (rowsNumber.length < 17) {\r\n        write(answerPanelLeft);\r\n      } else if (rowsNumber.length < 35 && Number(screenWidth) > 800) {\r\n        answerPanelRight.classList.remove('hide-block');\r\n        write(answerPanelRight);\r\n        currentPanel = answerPanelRight;\r\n      } else {\r\n        loseGame('(превышено 35 ходов)');\r\n        scrollDown();\r\n      }\r\n    }\r\n\r\n    jsLose.addEventListener('click', function () {\r\n      loseGame();\r\n    });\r\n\r\n    // обработка введенного игроком числа\r\n    function getNumber() {\r\n      let numberSet = new Set(enterNum);\r\n\r\n      if (enterNum.length == 4 && numberSet.size === 4) {\r\n        if (enterNum != hideNum) {\r\n          let num1 = 0,\r\n            num2 = 0;\r\n          cows = 0;\r\n          bulls = 0;\r\n\r\n          while (num1 < 4) {\r\n            if (enterNum[num1] == hideNum[num1]) {\r\n              bulls += 1;\r\n              num1++;\r\n            } else if (hideNum.indexOf(enterNum[num1]) != -1) {\r\n              cows += 1;\r\n              num1++;\r\n            } else {\r\n              num2++;\r\n              if (num2 == 4) {\r\n                num2 = 0;\r\n                num1++;\r\n              }\r\n            }\r\n          }\r\n          writeResult();\r\n          cowsBoard.value = '';\r\n        } else {\r\n          winGame()\r\n        }\r\n      } else {\r\n        show(cowsHelp);\r\n      }\r\n    }\r\n\r\n    overlay.addEventListener('click', function () {\r\n      hide(overlay);\r\n      clAdd(jsShow, 'hide-block');\r\n    });\r\n\r\n    jsRule.addEventListener('click', function () {\r\n      rule.classList.contains('hide-block') ? show(rule) : hide(rule);\r\n    });\r\n\r\n    //слежка за нажатием клавиш\r\n    document.addEventListener('keydown', function (e) {\r\n      // console.log(e);\r\n      enterNum = cowsBoard.value;\r\n\r\n      if (e.key == 'Enter' && hideNumText.innerHTML == 'XXXX') {\r\n        getNumber();\r\n      }\r\n      if (e.key == 'Escape') {\r\n        clAdd(jsShow, 'hide-block');\r\n      }\r\n    });\r\n\r\n    // компьютер загадывает число:\r\n    function hideNumber() {\r\n      while (hideNum.length < 4) {\r\n        let randomNum = Math.floor(Math.random() * 10);\r\n        if (!hideNum.includes(randomNum)) {\r\n          hideNum += randomNum;\r\n        }\r\n      }\r\n      console.log(hideNum);\r\n    }\r\n\r\n    // попап с ручным загадыванием числа\r\n    conceiveBtn.addEventListener('click', function () {\r\n      popapConcoct.classList.contains('hide-block') ? show(popapConcoct) : hide(popapConcoct);\r\n    });\r\n\r\n    handMadeHideBtn.addEventListener('click', function () {\r\n      concoctNumber = qOne('.cows__board--concoct');\r\n      let concoctNum = concoctNumber.value;\r\n      let concoctNumSet = new Set(concoctNum);\r\n\r\n      if (concoctNum.length == 4 && concoctNumSet.size == 4 && Number(concoctNum) > 4) {\r\n        hideNum = concoctNum;\r\n        concoctNum = '';\r\n        concoctNumber.setAttribute('disabled', true);\r\n        console.log(hideNum);\r\n        startGame();\r\n        hide(popapConcoct);\r\n      }\r\n    });\r\n\r\n    // слайдер\r\n    const cowsBg = qOne('.cows'),\r\n      checkImg = new Image();\r\n    let randomImg;\r\n\r\n    setInterval(() => {\r\n      chengeImg();\r\n    }, 10000);\r\n\r\n    function chengeImg() {\r\n      let i = 0,\r\n        c = 0;\r\n      while (i < 1 && c < 10) {\r\n        randomImg = randomI();\r\n        checkImg.src = `images/cows/${randomImg}.jpg`;\r\n        checkImg.onload = function () {\r\n          cowsBg.style.backgroundImage = `url(images/cows/${randomImg}.jpg)`;\r\n          i++;\r\n        }\r\n        c++;\r\n      }\r\n    }\r\n\r\n    function randomI() {\r\n      return Math.floor(Math.random() * 10);\r\n    }\r\n\r\n    // кнопка вызова мобильного меню\r\n    let burger = qOne('.burger'),\r\n      mobileMenu = qOne('.header__menu');\r\n\r\n    burger.addEventListener('click', function () {\r\n      this.classList.toggle('burger--close');\r\n      mobileMenu.classList.toggle('header__menu--show');\r\n    });\r\n\r\n    mobileMenu.addEventListener('click', function () {\r\n      this.classList.remove('header__menu--show');\r\n    });\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n});"]}